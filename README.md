# Общая доработка паблик мода Arizona RP

```
Файлы данного репозитория используют кодировку windows1251. Откройте их в своём редакторе для просмотра содержимого без иероглифов.
```
```
Если желаете сравнить версии файлов, используйте для этого также редактор, иначе неправильно отобразится кириллица.
```

## Описание

Совместная доработка паблик слива мода Arizona RP для SAMP. Чуть позже на данной странице появится описание возможностей самого мода, какие системы тут присутствуют, и всякое другое. Добро пожаловать!

Идея с публичными доработками принадлежит авторам сообщества ВКонтакте — [atver | Создание Серверов | samp crmp mta ugmp](https://vk.com/atversion).

В моде присутствует код, который принадлежит соответствующим авторам. Все имена и ссылки будут лежать в файле [contributors](https://github.com/atver/arizona/blob/master/CONTRIBUTORS.md). К сожалению, неизвестно кто автор большинства кода в моде. Если знаете кто автор определённых частей кода либо вы им и являетесь, пожалуйста, укажите имя на странице по ссылке выше (по возможности, желательно со ссылкой на источник).

На странице [CHANGELOG](https://github.com/atver/arizona/blob/master/CHANGELOG.md) можно почитать про известные изменения мода, сделанные как этим сообществом, так и теми кто делал мод до нас.

Для упрощения поиска необходимой команды сервера, достаточно перейти на [данную страницу](https://github.com/atver/arizona/blob/main/COMMANDS.md), куда были выписаны все команды мода.

Если у вас есть идеи, что добавить либо изменить, но вы не в состоянии это самостоятельно реализовать — загляните на страницу [обсуждения мода](https://github.com/atver/arizona/discussions/1) либо в [данную беседу ВКонтакте](https://cutt.ly/RzV2l2R).

Смело редактируйте данный файл, также как и сам мод, если у вас появились какие-либо интересные идеи.

## Установка

### Требования

Чтобы начать работу с данным модом, на вашем компьютере должны быть установлены следующие инструменты:

- [git](https://git-scm.com) Для клонирования этого репозитория.
- [sampctl](https://github.com/Southclaws/sampctl) Для автоматической установки необходимых зависимостей Pawn и плагинов SA-MP.
- [vscode](https://code.visualstudio.com/) Для удобного редактирования кода. После его установки, рекомендуем также установить [плагин sampctl](https://marketplace.visualstudio.com/items?itemName=southclaws.vscode-pawn). Вы можете использовать любой другой удобный вам редактор.
- [xampp](https://apachefriends.org/) Для импорта базы данных и подключения к ней. Вы можете использовать любой другой аналог, например, [OpenServer](https://ospanel.io/).

### Сборка мода в первый раз

Клонируйте репозиторий на свой компьютер с помощью [Git](https://git-scm.com) (либо с помощью [GitHub Desktop](https://desktop.github.com/))

```
git clone https://github.com/atver/arizona.git
```

Теперь откройте папку с модом в своей любимой среде написания кода. Рекомендуем [vscode](https://code.visualstudio.com/). У него есть встроенная командная строка (терминал), с помощью которого благодаря sampctl можно выполнять различные быстрые действия, например, можно выполнять компиляцию pwn в amx, а также запускать сервер. К слову, вы всё также можете использовать обычный редактор Pawno, если хотите.

Сейчас желательно войти в панель phpMyAdmin через, например, xampp. Создайте там базу данных с любым названием, например, `arzc` (кодировку выберите `Сравнение`). Зайдите на вкладку `Импорт`. Импортируйте файл `arzcdb.sql` с параметрами по умолчанию. Отлично! Вам осталось только вернуться в редактор кода, зайти в папку `scriptfiles` и открыть там файл `mysql_settings.ini`. Если вы называли БД иначе чем `arzcdb`, то измените название на своё.

Теперь выполните следующие команды для получения зависимостей языка Pawn, а также обновления SAMP плагинов, для получения актуальной версии компилятора, и выполнения других необходимых компонентов. Если используете vscode, то терминал можно открыть с помощью `shift+ctrl+~`.

```
sampctl p ensure
sampctl p build
```

## Запуск сервера

Если компиляция мода была выполнена без ошибок, вы можете запустить сервер с помощью samp-server.exe, но мы рекомендуем запускать сервер с помощью следующей команды:

```
sampctl p run
```

Иногда samp-server.exe может закрываться при запуске после новой компиляции. Если такое случается, достаточно выполнить команду выше, после чего правильно сгенерируется актуальный `server.cfg`. После этого закройте консоль с помощью `ctrl+c`, теперь samp-server.exe должен запустится нормально.

Кстати о `server.cfg`. Не редактируйте его! Теперь это генерируемый файл. Теперь вы должны использовать файл `pawn.json` для редактирования конфигурации сервера. Более подробно о pawn.json читайте на официальных страницах [sampctl](https://github.com/Southclaws/sampctl).

### Как выдать себе админку?

Как только вы создали своего персонажа на вашем сервере:

1. Перейдите в консоль запуска сервера
2. Скопируйте пароль со строки `FullDostup Pass`
3. Вернувшись в игру введите команду `/ServerOwner [скопированный код]`
4. Введите команду `/apanel` и придумайте свой админ-пароль
5. Закройте админ-панель, введите команду `/setcmd`, выдайте себе все команды

### Обновление сервера

Если наше комьюнити выпустило новую версию данного мода, используйте `git pull` внутри репозитория, чтобы обновить все новые файлы. Вы также можете использовать [GitHub Desktop](https://desktop.github.com/) для более удобного интерфейса.

### Как взять мод за основу и залить на хостинг

Чуть позже тут будет расписана подробная инструкция по установке мода на хостинг.

Если вы не планируете принимать участие в активной общей доработке данного мода, то просто скачайте последнюю стабильную версию с данной страницы. Вы также можете использовать [данную ссылку](https://github.com/atver/arizona/archive/main.zip), чтобы скачать самые свежие файлы сервера, но не гарантируем, что они могут быть максимально протестированы.

Если у вас хостинг на линуксе, не забудьте в кофигурации добавить .so к названиям подключаемых плагинов в строке plugins (пример: streamer.so).

То, что сервер разрабатывается при помощи sampctl не отменяет того факта, что вам и дальше нужен server.cfg, на хостинге вы уже можете его редактировать.

Обратите внимание, вам не нужно заливать на хостинг все файлы сервера. Всякие инклуды необходимы только при компиляции. Достаточно загрузить только .amx файлы, плагины, конфиги, и т.д.

---

## Open Source

Поиграйтесь с этим кодом, добавьте новые возможности, сделайте код более красивым, добавьте новый маппинг, и многое другое. Вы без проблем можете взять данный мод себе за основу, залить его на хостинг и позвать весь мир играть на нём. Будет круто увидеть какие творения создаются! Пожалуйста, опубликуйте все исправления ошибок, чтобы принести пользу всем.

### Не будь одиночкой

Когда вы что-то исправляете, не держите это при себе. Это проект с открытым исходным кодом. Важная часть открытого исходного кода — это совместное использование, поэтому этот код бесплатный и доступен всем.

Не стесняйтесь хранить свои уникальные функции в секрете, просто отправляйте _все_ исправления базового кода в виде pull requests или просто отправляйте нам как авторам идеи с общими доработками — [в данную группу ВКонтакте](https://vk.com/atversion). Вы также можете использовать [issues](https://github.com/atver/arizona/issues).

### Лицензия

[Краткое содержание MPL-2.0](https://tldrlegal.com/license/mozilla-public-license-2.0-(mpl-2))

Убедитесь, что вы понимаете эти ключевые моменты лицензии:

Вы должны сделать исходный код для любых ваших изменений доступным в рамках MPL, но вы можете комбинировать программное обеспечение MPL с частным кодом, если вы храните код MPL в отдельных файлах. Версия 2.0 по умолчанию совместима с LGPL и GPL версии 2 или выше. Вы можете распространять двоичные файлы по частной лицензии, если вы делаете исходный код доступным на условиях MPL.

К слову, файлы представленные в репозитории не являются официальными файлами сервера с аналогичным названием и не имеет никакого отношения к данному серверу. Это только немного похожая копия, сделанная фанатами для фанатов, поэтому и распространяется по свободной лицензии.

**А главное, не удаляйте примечания сверху и снизу страницы файлов мода.**

Сверху отображается важная информация о самом моде, а снизу небольшая информация о лицензии исходного файла.

```
Идея с публичными доработками модов принадлежит авторам сообщества https://vk.com/atversion.
This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0.
If a copy of the MPL was not distributed with this file. You can obtain one at http://mozilla.org/MPL/2.0/.
```
